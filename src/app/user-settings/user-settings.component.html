<section id="section-user-stng">
    <div class="title">Paramètres d'utilisateur</div>
    <div id="ct-tip">
        <small class="tip">Cliquez sur un champ pour modifier l'info</small>
        <small class="tip">Laissez vide pour ne pas apporter des modifications</small>
    </div>
    <main class="main-content-stng">
        <article>
            <h5>Mes infos</h5>
            <div class="ct-champ-picture">
                <a href="http://127.0.0.1:4100/profils/{{user.profil}}" target="_blank"><img id="user-picture" src="http://127.0.0.1:4100/profils/{{user.profil}}" alt=""></a>
                <div class="ct-picture-picker">
                    <div><span class="txt-red">*</span>Changer la photo de profil</div>
                    <input (change)="updatePictureOnly($event)" class="stng-input" type="file" name="" id="">
                </div>
            </div>
            <div class="ct-champ">
                <div class="title"><span class="txt-red">*</span>Mon nom d'utilisateur</div>
                <div>
                    <input class="stng-input" type="text" value="{{user.name}}" [(ngModel)]="user.name">
                </div>
            </div>
            <div class="text-right" [class.disabled]="loading">
                <button (click)="updateName()" id="validate-changement-btn">
                    Enregistrer
                    <div *ngIf="loading" class="spinner-border"></div>
                </button>
            </div>
            <div class="ct-champ">
                <div class="title"><span class="txt-red">*</span>Mon numéro</div>
                <div>
                    <input class="stng-input" type="text" value="{{user.number}}" [(ngModel)]="user.number">
                </div>
            </div>
            <div class="text-right">
                <button (click)="updateName()" id="validate-changement-btn">Enregistrer les changements</button>
            </div>
            <div class="ct-champ">
                <div class="title"><span class="txt-red">*</span>Changer de mot de passe</div>
                <div>
                    <input type="text" [(ngModel)]="oldPassword" class="password-input" placeholder="Ancien mot de passe">
                    <input type="text" [(ngModel)]="newPassword" class="password-input" placeholder="Nouveau mot de passe">
                </div>
            </div>
            <div class="text-right">
                <button (click)="updatePassword()" id="validate-changement-btn">Changer le mot de passe</button>
            </div>
            <div class="ct-champ">
                <div class="title title-danger"><span class="txt-red">*</span>Supprimer le compte</div>
                <div>
                    <input type="text" [(ngModel)]="oldPassword" class="password-input" placeholder="Mot de passe du compte">
                </div>
            </div>
            <div class="text-right">
                <button (click)="deleteAccount()" id="delete-account-btn">Je suis sur de vouloir supprimer mon compte zandokin</button>
            </div>
        </article>
        <article></article>
    </main>
</section>
<div class="alert-setting-done-success" *ngIf="success">
    <h3 class="title" style="background: green;">Succès</h3>
    <div class="bg-img">
        <div class="msg-container">
            {{message}}
        </div>
    </div>
    <div class="actions-row">
        <button (click)="reload()" style="--bg : green;">Compris</button>
    </div>
</div>
<div class="alert-setting-done-error" *ngIf="error">
    <h3 class="title"  style="background: red;">Erreur</h3>
    <div class="bg-img">
        <div class="msg-container">
            {{message}}
        </div>
    </div>
    <div class="actions-row">
        <button (click)="gotIt()" style="--bg : red;">Compris</button>
    </div>
</div>
<style>
    #section-user-stng{
        border: 1px solid;
        margin: 15px 5px;
    }
    .disabled{
        cursor: not-allowed;
        opacity: 0.3;
    }
    .title{
        border-bottom: 1px solid #000;
        padding: 5px;
        color: #fff;
        background: #ee7a0e;
    }
    .title-danger{
        background: red;
    }
    .stat-data{
        padding: 10px;
    }
    .main-content-stng{
        width: 60%;
        margin: 15px auto;
    }
    #user-picture{
        margin: 12px 12px 0px 0px;
        width: 120px;
        height: 120px;
        border-radius: 50%;
    }
    .stng-input{
        padding: 6px;
        outline: none;
        background: grey;
        color: #fff;
        display: block;
        width: 95%;
        border: none;
        border-radius: 7px;
        box-shadow: 0px 0px 5px #000;
        margin: 10px;
    }
    .stng-input:focus{
        background: #fff;
        color: #000;
        border: none;
    }
    .password-input{
        padding: 6px;
        outline: none;
        background: #fff;
        color: #000;
        display: block;
        width: 95%;
        border: 1px solid #000;
        border-radius: 7px;
        margin: 10px;
    }
    .txt-red{
        color: red;
    }
    .ct-champ{
        border: 1px solid #000;
        margin-bottom: 12px;
        
    }
    .ct-champ-picture{
        display: flex;
        margin-bottom: 12px;
    }
    .text-right{
        text-align: right;
        margin: 10px;
    }
    #section-articles-stng{
        border: 1px solid black;
        margin: 15px 5px;
    }
    #validate-changement-btn{
        padding: 7px;
        border: 1px solid #0cf;
        background: #fff;
        color: #0cf;
        border-radius: 7px;
        transition: ease .5s;
    }
    #validate-changement-btn:hover{
        background: #0cf;
        color: #fff;
        box-shadow: 0px 0px 5px #fff;
    }
    #delete-account-btn{
        padding: 7px;
        border: 1px solid red;
        background: #fff;
        color: red;
        border-radius: 7px;
        transition: ease .5s;
    }
    #delete-account-btn:hover{
        background: red;
        color: #fff;
        box-shadow: 0px 0px 5px #fff;
    }
    @media ((max-width: 797px) and (min-width: 481px)){
        .main-content-stng{
            width: 90%;
            margin: 15px auto;
        }
        .password-input, .stng-input{
            width: 85%;
        }
    }
    @media (max-width: 480px){
        .main-content-stng{
            width: 90%;
            margin: 15px auto;
        }
        .password-input, .stng-input{
            width: 85%;
        }
    }
    .spinner-border {
        display: inline-block;
        width: 15px;
        height: 15px;
        vertical-align: top;
        border-radius: 50%;
        border: solid;
        border-right-color: transparent;
        animation: 1s linear infinite spinner-border;
    }

    @keyframes spinner-border {
        to {
            transform: rotate(360deg);
        }
    }
</style>